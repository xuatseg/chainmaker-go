# ChainMaker 配置目录

本目录包含了长安链（ChainMaker）的配置文件和配置模板。

## 目录结构

### 配置模板
- **config_tpl**: 标准配置模板目录
- **config_tpl_pk**: 公钥体系配置模板目录
- **config_tpl_pwk**: 公私钥体系配置模板目录

### 证书配置
- **crypto-config**: 存放证书相关配置

### 组织配置
- **wx-org-solo**: 单组织配置示例
- **wx-org1** 到 **wx-org7**: 多组织配置示例

## 配置说明

### 配置模板使用

1. **标准配置模板 (config_tpl)**
   - 包含基础的节点配置
   - 网络配置
   - 共识配置
   - 区块配置等

2. **公钥体系配置 (config_tpl_pk)**
   - 适用于使用公钥体系的部署场景
   - 包含身份认证相关配置
   - 权限管理配置

3. **公私钥体系配置 (config_tpl_pwk)**
   - 适用于使用公私钥体系的部署场景
   - 包含完整的密钥管理配置
   - 证书管理配置

### 组织配置说明

组织配置目录（wx-org-*）包含：
- 节点配置文件
- 证书文件
- 网络连接信息
- 权限配置

## 配置文件结构

典型的配置文件包含以下主要部分：

```yaml
# 节点基础配置
node:
  # 节点类型
  type: full
  # 节点优先级
  priority: 0
  # 节点域名
  domain: chainmaker.org

# 链配置
chain:
  # 链ID
  chain_id: chain1
  # 密码算法配置
  crypto:
    # 哈希算法
    hash: SHA256
    # 非对称加密
    asym: SM2
    # 对称加密
    sym: AES

# 共识配置
consensus:
  # 共识类型
  type: TBFT
  # 共识节点列表
  nodes: ...

# 其他配置项...
```

## 配置最佳实践

1. **环境隔离**
   - 建议为不同环境（开发、测试、生产）创建独立的配置
   - 使用环境变量覆盖敏感配置

2. **安全性考虑**
   - 妥善保管证书文件
   - 定期更新密钥
   - 限制配置文件访问权限

3. **配置验证**
   - 部署前验证配置有效性
   - 使用提供的工具验证配置格式

## 配置更新流程

1. 备份现有配置
2. 修改配置文件
3. 验证新配置
4. 重启节点使配置生效

## 常见问题

1. **配置文件格式错误**
   - 检查 YAML 语法
   - 确保缩进正确
   - 验证必填字段

2. **证书配置问题**
   - 确保证书路径正确
   - 验证证书有效性
   - 检查证书权限

3. **网络配置问题**
   - 验证端口配置
   - 检查防火墙设置
   - 确认节点地址可达

## 工具支持

配置目录中提供了多个辅助工具：
- 配置验证工具
- 证书生成工具
- 配置转换工具

## 注意事项

1. 修改配置前先备份
2. 遵循最小权限原则
3. 定期检查和更新配置
4. 保持配置文件的一致性
5. 记录配置变更日志
