# 数据归档工具

本工具提供长安链数据的归档、查询和恢复功能，支持离线存储和历史数据管理。

## 功能列表

1. **数据归档**
   - 区块数据归档
   - 状态数据归档
   - 交易数据归档

2. **数据操作**  
   - 归档数据查询
   - 数据完整性验证
   - 归档数据恢复

## 使用指南

### 1. 归档命令
```bash
# 归档指定高度的区块
cmc archive dump -start 100000 -end 100100 -output ./backup

# 归档状态数据
cmc archive dump -type state -output ./state_backup
```

### 2. 查询命令
```bash
# 查询归档数据
cmc archive query -height 100050

# 列出所有归档点
cmc archive list
```

### 3. 恢复命令
```bash
# 从归档恢复数据
cmc archive restore -input ./backup -height 100050
```

## 实现原理

### 1. 数据格式
```
归档目录结构：
├── meta.json       # 元数据
├── blocks/        # 区块数据
│   ├── 100000.blk
│   └── ...
└── state/         # 状态数据
    ├── 100000.st
    └── ...
```

### 2. 核心流程
1. 创建归档快照
2. 验证数据一致性
3. 压缩存储数据
4. 生成校验信息

## 注意事项

1. 存储要求
   - 确保足够的磁盘空间
   - 推荐使用专用存储设备

2. 性能影响
   - 归档期间可能影响节点性能
   - 建议在低峰期执行

3. 安全建议
   - 加密敏感数据
   - 验证归档文件完整性
   - 多地备份重要数据
